<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Count matches</title>
    <link href="js-console.css" rel="stylesheet" />
</head>
<body>
    <label for="word">Input word to search:</label>
    <br />
    <input type="text" id="word" value="in" />
    <br />
    <label for="input">Input some text here:</label>
    <br />
    <textarea id="input">We are living in an yellow submarine. We don't have anything else. Inside the submarine is very tight. So we are drinking all the day. We will move out of it in 5 days.</textarea>
    <br />
    <button id="numberButton">Click me when ready!</button>
    <div id="console"></div>
    <script src="js-console.js"></script>
    <script>
        var button = document.getElementById('numberButton');
        button.onclick = handleInput;
        document.onkeydown = function (e) { if (e.keyCode == 13) handleInput(); }

        function handleInput() {
            //var input = jsConsole.read('#input');
            var input = document.getElementById("input").value;
            var word = jsConsole.read('#word');
            jsConsole.write("Number of matches: ");
            jsConsole.writeLine(numberOfMatches(input, word));
        }

        function numberOfMatches(text, str) {
            var pattern = str.toString();
            var regex = new RegExp(pattern, "gi");
            return (text.match(regex) || "").length;
        }
    </script>
</body>
</html>
