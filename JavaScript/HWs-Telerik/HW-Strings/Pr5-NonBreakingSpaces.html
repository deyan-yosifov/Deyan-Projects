<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>NBSPs</title>
    <link href="js-console.css" rel="stylesheet" />
</head>
<body>
    <label for="input">Input some text to make spaces non-breaking</label>
    <br />
    <textarea id="input"></textarea>
    <br />
    <button id="numberButton">Click me when ready!</button>
    <div id="console"></div>
    <script src="js-console.js"></script>
    <script>
        var button = document.getElementById('numberButton');
        button.onclick = handleInput;
        document.onkeydown = function (e) { if (e.keyCode == 13) handleInput(); }

        String.prototype.htmlEscape = function () {
            var escapedStr = String(this).replace(/&/g, '&amp;');
            escapedStr = escapedStr.replace(/</g, '&lt;');
            escapedStr = escapedStr.replace(/>/g, '&gt;');
            escapedStr = escapedStr.replace(/"/g, '&quot;');
            escapedStr = escapedStr.replace(/'/g, "&#39");
            return escapedStr;
        }

        function handleInput() {
            //var input = jsConsole.read('#input');
            var input = document.getElementById("input").value;
            jsConsole.writeLine("Changing the spaces leads to: ");
            jsConsole.writeLine(makeSpacesNonBreaking(input).htmlEscape() + "<br />");
        }

        function makeSpacesNonBreaking(text) {
            return new String(text).replace(/ /g, "&nbsp;");
        }
    </script>
</body>
</html>
